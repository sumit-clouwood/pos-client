<template>
  <div
    :class="['orders-menu-overlay', { active: !footerMenuHendler }]"
    @click="footerMenuHendlerChange"
  >
    <div class="orders-menu">
      <div
        class="footer-slider-list-item color-secondary"
        data-toggle="modal"
        data-target="#manage-customer"
        v-show="!carhop && !waiter"
      >
        <!--@click="openManageCustomer"-->
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.6667 7C16.6667 9.76667 14.4334 12 11.6667 12C8.90008 12 6.66675 9.76667 6.66675 7C6.66675 4.23333 8.90008 2 11.6667 2C14.4334 2 16.6667 4.23333 16.6667 7ZM15.3335 6.99998C15.3335 4.96665 13.7001 3.33331 11.6668 3.33331C9.63346 3.33331 8.00012 4.96665 8.00012 6.99998C8.00012 9.03331 9.63346 10.6666 11.6668 10.6666C13.7001 10.6666 15.3335 9.03331 15.3335 6.99998Z"
            fill="#3D3F43"
          />
          <path
            d="M11.6669 9.99989C12.3669 9.99989 13.0336 9.66655 13.5002 9.09989C13.7336 8.79989 13.7002 8.39989 13.4002 8.16655C13.1002 7.93322 12.7002 7.96655 12.4669 8.26655C12.0002 8.79989 11.2669 8.79989 10.8336 8.26655C10.6002 7.96655 10.1669 7.93322 9.90022 8.16655C9.60022 8.39989 9.56689 8.83322 9.80022 9.09989C10.3002 9.66655 10.9669 9.99989 11.6669 9.99989Z"
            fill="#3D3F43"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M20 21.9999H3.3C2.6 21.9999 2 21.3999 2 20.6999C2 16.6333 5.3 13.3333 9.36667 13.3333H13.9667C18.0333 13.3333 21.3333 16.6333 21.3 20.6999C21.3 21.3999 20.7333 21.9999 20 21.9999ZM14.0003 14.6666H9.36695C6.03362 14.6666 3.33362 17.3666 3.33362 20.6666H20.0336C20.0003 17.3666 17.3003 14.6666 14.0003 14.6666Z"
            fill="#3D3F43"
          />
        </svg>
        <a class="footer-slider-list-item-link">
          <span>{{ _t('Customer') }}</span>
        </a>
      </div>
      <div
        v-if="!carhop && !waiter"
        class="footer-slider-list-item footer-slider-list-item-open-orders"
        id="hold-order-box"
        @click.stop="viewHoldOrders"
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
            stroke="#4B4E53"
            stroke-linecap="square"
          />
          <path
            d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"
            stroke="#4B4E53"
            stroke-linecap="square"
          />
        </svg>
        <a class="footer-slider-list-item-link">
          <span>{{ _t('Hold Orders') }}</span>
        </a>
      </div>
      <div
        v-show="!carhop && !waiter"
        class="footer-slider-list-item"
        data-toggle="modal"
        data-dismiss="modal"
        @click.stop="add_customer_address"
      >
        <svg
          width="17"
          height="21"
          viewBox="0 0 17 21"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.6475 17.9229H5.42148C5.19459 17.0593 4.5202 16.3849 3.65667 16.158V1.52509C3.65623 1.26889 3.49697 1.03981 3.25698 0.95014L0.797312 0.0277654C0.48602 -0.0688443 0.153424 0.0942219 0.0391578 0.399475C-0.0751081 0.704728 0.0686571 1.04611 0.366871 1.17766L2.42684 1.95245V16.158C1.26468 16.4568 0.487733 17.5506 0.588269 18.7463C0.688803 19.9421 1.63748 20.8907 2.83321 20.9913C4.02894 21.0918 5.1227 20.3148 5.42148 19.1527H15.6475C15.9872 19.1527 16.2625 18.8774 16.2625 18.5378C16.2625 18.1982 15.9872 17.9229 15.6475 17.9229ZM3.0416 19.7675C2.36239 19.7675 1.81177 19.2168 1.81177 18.5376C1.81177 17.8584 2.36239 17.3078 3.0416 17.3078C3.72082 17.3078 4.27144 17.8584 4.27144 18.5376C4.27144 19.2168 3.72082 19.7675 3.0416 19.7675ZM5.50117 5.00953H15.9548C16.2944 5.00953 16.5697 5.28484 16.5697 5.62445V16.078C16.5697 16.4176 16.2944 16.6929 15.9548 16.6929H5.50117C5.16156 16.6929 4.88625 16.4176 4.88625 16.078V5.62445C4.88625 5.28484 5.16156 5.00953 5.50117 5.00953ZM9.49863 6.23939H11.9583V8.69906H9.49863V6.23939ZM6.11644 15.4631H15.3402V6.23939H13.188V9.31397C13.188 9.65358 12.9127 9.92889 12.5731 9.92889H8.88356C8.54395 9.92889 8.26865 9.65358 8.26865 9.31397V6.23939H6.11644V15.4631Z"
            fill="#3D3F43"
          />
        </svg>
        <a
          class="footer-slider-list-item-link"
          @click="setOrderType({ OTview: 'Delivery', OTApi: 'call_center' })"
        >
          <span>{{ _t('Send to Delivery') }}</span>
        </a>
      </div>
      <div
        class="footer-slider-list-item active"
        data-toggle="modal"
        data-target="#select-discount"
        id="discount-footer"
        @click.stop="discountHendlerChange"
        v-show="!carhop && !waiter"
      >
        <svg
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M10.4832 2.64677e-06C10.0262 0.000520331 9.62865 0.195454 9.31641 0.436798C9.00409 0.677729 8.75063 0.968269 8.51157 1.25579C8.03346 1.83073 7.58315 2.36521 7.23961 2.50147C6.89605 2.63762 6.19116 2.56111 5.4358 2.47518C5.05805 2.43169 4.66758 2.39638 4.27101 2.43676C3.87451 2.47714 3.45153 2.60785 3.12442 2.91804C2.79728 3.22803 2.65487 3.63238 2.60876 4.01205C2.56263 4.39152 2.59835 4.76603 2.63909 5.12831C2.72059 5.85307 2.78897 6.5296 2.64314 6.85729C2.49733 7.18499 1.93779 7.61059 1.33275 8.06253C1.03025 8.28865 0.722004 8.52624 0.467247 8.82288C0.212491 9.11951 0.00579622 9.49946 0.000118469 9.93711C-0.00553464 10.375 0.191844 10.7534 0.438937 11.0493C0.686028 11.3451 0.987534 11.5827 1.28422 11.8076C1.87757 12.2575 2.42693 12.6816 2.56427 13.0088C2.7016 13.3359 2.61397 14.0108 2.51372 14.7358C2.4636 15.0983 2.41877 15.4766 2.45507 15.8561C2.49137 16.2355 2.62332 16.637 2.94242 16.9461C3.26155 17.255 3.67934 17.3846 4.07486 17.4233C4.47045 17.4626 4.86486 17.4233 5.24369 17.3788C6.00124 17.2898 6.70746 17.2156 7.0475 17.3505C7.38751 17.4855 7.82386 18.0149 8.28711 18.5881C8.51873 18.8747 8.76564 19.1673 9.07172 19.4071C9.37781 19.647 9.76945 19.8408 10.2264 19.8398C10.6834 19.8393 11.0789 19.6444 11.3912 19.403C11.7035 19.1621 11.957 18.8696 12.196 18.582C12.6742 18.0072 13.1244 17.4746 13.468 17.3384C13.8115 17.2022 14.5164 17.2777 15.2718 17.3626C15.6495 17.4061 16.04 17.4414 16.4366 17.4011C16.8331 17.3607 17.2561 17.23 17.5832 16.9198C17.9103 16.6098 18.0527 16.2073 18.0988 15.8278C18.145 15.4483 18.1113 15.0719 18.0705 14.7095C17.9891 13.9849 17.9186 13.3084 18.0644 12.9805C18.2102 12.6528 18.7718 12.2273 19.3768 11.7753C19.6794 11.5494 19.9856 11.3096 20.2403 11.0129C20.4951 10.7163 20.7018 10.3385 20.7074 9.90072C20.7131 9.46296 20.5157 9.08643 20.2686 8.79053C20.0215 8.49472 19.722 8.25718 19.4254 8.0322C18.832 7.58223 18.2806 7.15829 18.1433 6.83101C18.0059 6.50373 18.0936 5.82497 18.1938 5.10001C18.244 4.73752 18.2888 4.36311 18.2525 3.98375C18.2162 3.60439 18.0863 3.20071 17.7672 2.89176C17.448 2.58281 17.0262 2.45324 16.6307 2.41452C16.2351 2.37518 15.8427 2.41247 15.4639 2.45699C14.7061 2.54499 14.0001 2.62435 13.6601 2.48934C13.3201 2.35422 12.8838 1.82109 12.4205 1.2477C12.1889 0.961112 11.944 0.672649 11.6379 0.432754C11.3318 0.192859 10.9402 -0.000825648 10.4832 2.64677e-06ZM10.4692 1.01522C10.6248 1.01449 10.7698 1.07198 10.9606 1.22148C11.1515 1.37109 11.363 1.60836 11.5815 1.8787C11.6493 1.96261 11.7171 2.05021 11.7862 2.1395C12.1625 2.62564 12.5777 3.16187 13.2417 3.42568C13.9073 3.68998 14.6082 3.59516 15.2413 3.5095C15.3557 3.49402 15.4679 3.47884 15.5773 3.46613C15.9346 3.42368 16.2629 3.39881 16.5096 3.42366C16.7562 3.44851 16.9004 3.50705 17.009 3.61173C17.1177 3.71692 17.1765 3.85643 17.1991 4.09301C17.2218 4.32949 17.1939 4.64293 17.1466 4.9848C17.1318 5.09154 17.1143 5.20101 17.0964 5.31264C16.9997 5.91627 16.8928 6.58307 17.1607 7.22136C17.4295 7.86175 17.9871 8.26743 18.4915 8.63437C18.5829 8.70081 18.6724 8.76598 18.7583 8.83103C19.0381 9.04339 19.2857 9.24723 19.4397 9.43163C19.5938 9.61603 19.652 9.75573 19.65 9.90482C19.6481 10.0538 19.5864 10.1952 19.4276 10.38C19.2688 10.5651 19.0173 10.7695 18.732 10.9827C18.6444 11.048 18.5531 11.1136 18.46 11.1804C17.9459 11.5492 17.3773 11.9571 17.092 12.5984C16.8073 13.2382 16.8967 13.9051 16.9777 14.5089L16.9777 14.5089L16.9777 14.509L16.9778 14.5091L16.9778 14.5092C16.9926 14.6201 17.0072 14.7289 17.0192 14.835C17.0576 15.1766 17.0782 15.4901 17.0495 15.7267C17.0208 15.9634 16.9566 16.1004 16.8453 16.206C16.7339 16.3114 16.5869 16.3706 16.3397 16.3961C16.0925 16.422 15.7677 16.396 15.4115 16.3577C15.3027 16.3453 15.1912 16.3306 15.0775 16.3155L15.0775 16.3155L15.0774 16.3155C14.4465 16.2319 13.7487 16.1394 13.0759 16.4062C12.4035 16.6728 11.9724 17.2125 11.5823 17.7009L11.5822 17.7009L11.5822 17.701L11.5818 17.7016C11.5113 17.7898 11.4421 17.8763 11.3732 17.9593C11.1477 18.2303 10.9309 18.4704 10.7362 18.6205C10.5415 18.7709 10.3963 18.8285 10.2407 18.8288C10.0852 18.8294 9.93815 18.7718 9.74732 18.6225C9.5565 18.473 9.34701 18.2357 9.12852 17.9653C9.06109 17.8819 8.99356 17.7947 8.92467 17.7057C8.54713 17.2182 8.12894 16.6782 7.46425 16.4143C6.80226 16.1514 6.10689 16.2466 5.47693 16.3328C5.35899 16.3489 5.24334 16.3648 5.13063 16.3779C4.77334 16.4203 4.44508 16.4412 4.19839 16.4163C3.95171 16.3915 3.80954 16.3332 3.70093 16.2282C3.59228 16.1231 3.53146 15.9856 3.50882 15.749C3.48618 15.5124 3.51614 15.1991 3.56342 14.8572C3.57798 14.7519 3.59519 14.644 3.61274 14.534C3.7092 13.9291 3.81582 13.2606 3.54724 12.6206C3.27889 11.9812 2.72111 11.5758 2.21688 11.2093C2.12466 11.1423 2.03422 11.0766 1.94768 11.011C1.66783 10.7988 1.42226 10.5948 1.26822 10.4104C1.11418 10.226 1.05598 10.0863 1.05791 9.93717C1.05984 9.78808 1.12153 9.64687 1.28035 9.46195C1.43918 9.27693 1.68862 9.07262 1.97397 8.85934C2.0633 8.7926 2.15664 8.72578 2.25183 8.65763C2.76482 8.29037 3.33171 7.88453 3.616 7.24562C3.90077 6.60546 3.81113 5.93676 3.73013 5.33248C3.71528 5.22164 3.70071 5.11297 3.6888 5.00704C3.65035 4.66516 3.6297 4.35385 3.65846 4.11727C3.68721 3.88058 3.74932 3.73967 3.86068 3.63396C3.9721 3.52856 4.11905 3.46935 4.36623 3.44388C4.61342 3.41903 4.94227 3.44399 5.29847 3.4823C5.41098 3.49505 5.52633 3.51052 5.64397 3.5263C6.27135 3.61046 6.96338 3.7033 7.63209 3.43781C8.30361 3.17155 8.73595 2.62993 9.12615 2.14111C9.19738 2.05189 9.2672 1.96442 9.33681 1.88071C9.56232 1.60965 9.77707 1.37362 9.97178 1.2235C10.1665 1.07316 10.3137 1.01542 10.4692 1.01521L10.4692 1.01522ZM6.21259 7.41536C6.21259 6.2779 7.14582 5.34462 8.28332 5.34462C9.42083 5.34462 10.3541 6.2779 10.3541 7.41536C10.3541 8.55291 9.42083 9.48609 8.28332 9.48609C7.14582 9.48609 6.21259 8.55291 6.21259 7.41536ZM13.094 6.01416L6.88181 12.2264L7.61385 12.9584L13.8261 6.7462L13.094 6.01416ZM9.31844 7.41542C9.31844 6.83748 8.86102 6.38005 8.28307 6.38005C7.70512 6.38005 7.2477 6.83748 7.2477 7.41542C7.2477 7.99336 7.70512 8.45079 8.28307 8.45079C8.86102 8.45079 9.31844 7.99336 9.31844 7.41542ZM12.4244 9.48603C11.2869 9.48603 10.3537 10.4193 10.3537 11.5568C10.3537 12.6943 11.2869 13.6275 12.4244 13.6275C13.5619 13.6275 14.4952 12.6943 14.4952 11.5568C14.4952 10.4193 13.5619 9.48603 12.4244 9.48603ZM13.4602 11.5568C13.4602 10.9789 13.0027 10.5215 12.4248 10.5215C11.8468 10.5215 11.3894 10.9789 11.3894 11.5568C11.3894 12.1348 11.8468 12.5922 12.4248 12.5922C13.0027 12.5922 13.4602 12.1348 13.4602 11.5568Z"
            fill="#3D3F43"
          />
        </svg>
        <a class="footer-slider-list-item-link">
          <span>{{ _t('Select') + ' ' + _t('Discount') }}</span>
        </a>
      </div>
      <div
        class="footer-slider-list-item"
        data-toggle="modal"
        data-target="#dining-option"
        v-show="!carhop && !waiter"
      >
        <svg
          width="15"
          height="17"
          viewBox="0 0 15 17"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1 1V4C1 5.65685 2.34315 7 4 7C5.65685 7 7 5.65685 7 4V1M4 1V17V1ZM14 9C12 8.33333 11 7 11 5C11 3 12 1.66667 14 1V17V9Z"
            stroke="#4B4E53"
            stroke-linecap="square"
          />
        </svg>
        <a class="footer-slider-list-item-link">
          <span>{{ _t('Dinning Options') }}</span>
        </a>
      </div>
      <div
        data-toggle="modal"
        data-target="#search-loyalty-customer"
        class="footer-slider-list-item"
        :class="{ loyaltyApplied: loyaltyCard }"
        @click="loyaltyHendlerChange"
        v-show="!carhop && !waiter"
      >
        <svg
          width="22"
          height="22"
          viewBox="0 0 22 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M20.9536 0.558476C20.2096 -0.185501 18.9103 -0.186816 18.165 0.558476L16.771 1.95245L2.6289 1.95902C1.17906 1.95902 0 3.13808 0 4.58792V18.8825C0 20.3324 1.17906 21.5114 2.6289 21.5114H16.9235C18.3734 21.5114 19.5524 20.3324 19.5524 18.8825V4.74697L20.953 3.34642C21.325 2.97443 21.5307 2.47889 21.5307 1.95245C21.5307 1.42536 21.325 0.929808 20.9536 0.558476ZM11.4397 11.001L10.2777 11.2337L10.5103 10.0717L17.6997 2.88231L18.629 3.81163L11.4397 11.001ZM15.4502 3.27357H2.62903C1.90477 3.27357 1.31458 3.8631 1.31458 4.58802V5.90247H12.8213L15.4502 3.27357ZM16.9237 20.1971H2.62903C1.90411 20.1971 1.31458 19.6076 1.31458 18.8827V7.21695H11.4398L9.32811 9.43508C9.29722 9.49226 9.27422 9.55404 9.26108 9.61845L8.79642 11.9417C8.7537 12.1573 8.82074 12.3801 8.97584 12.5352C9.10006 12.6594 9.26765 12.7278 9.4405 12.7278C9.48322 12.7278 9.5266 12.7232 9.56932 12.7146L11.8926 12.25C12.0194 12.2243 12.1364 12.1619 12.2284 12.0706L17.0827 7.21629H18.2381V18.882C18.2381 19.6069 17.6486 20.1971 16.9237 20.1971ZM19.5588 2.88167L20.0235 2.41701C20.147 2.2928 20.2161 2.12783 20.2161 1.95236C20.2161 1.77622 20.1477 1.61191 20.0235 1.48836C19.7751 1.23927 19.3439 1.23992 19.0942 1.4877L18.6295 1.95236L19.5588 2.88167Z"
            fill="#3D3F43"
          />
        </svg>
        <a class="footer-slider-list-item-link">
          <span v-if="!loyaltyCard">{{ _t('Loyalty') }}</span>
          <span v-if="loyaltyCard">
            <span>
              {{
                isNaN(loyaltyCard.balance)
                  ? 0
                  : formatPrice(loyaltyCard.balance)
              }}
              {{ _t('Loyalty') }}
            </span>
            <br />
            <span>{{ selectedCustomer }}</span>
          </span>
        </a>
      </div>
      <div
        class="footer-slider-list-item"
        data-toggle="modal"
        data-target="#add-note"
      >
        <svg
          width="22"
          height="22"
          viewBox="0 0 22 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M20.9536 0.558476C20.2096 -0.185501 18.9103 -0.186816 18.165 0.558476L16.771 1.95245L2.6289 1.95902C1.17906 1.95902 0 3.13808 0 4.58792V18.8825C0 20.3324 1.17906 21.5114 2.6289 21.5114H16.9235C18.3734 21.5114 19.5524 20.3324 19.5524 18.8825V4.74697L20.953 3.34642C21.325 2.97443 21.5307 2.47889 21.5307 1.95245C21.5307 1.42536 21.325 0.929808 20.9536 0.558476ZM11.4397 11.001L10.2777 11.2337L10.5103 10.0717L17.6997 2.88231L18.629 3.81163L11.4397 11.001ZM15.4502 3.27357H2.62903C1.90477 3.27357 1.31458 3.8631 1.31458 4.58802V5.90247H12.8213L15.4502 3.27357ZM16.9237 20.1971H2.62903C1.90411 20.1971 1.31458 19.6076 1.31458 18.8827V7.21695H11.4398L9.32811 9.43508C9.29722 9.49226 9.27422 9.55404 9.26108 9.61845L8.79642 11.9417C8.7537 12.1573 8.82074 12.3801 8.97584 12.5352C9.10006 12.6594 9.26765 12.7278 9.4405 12.7278C9.48322 12.7278 9.5266 12.7232 9.56932 12.7146L11.8926 12.25C12.0194 12.2243 12.1364 12.1619 12.2284 12.0706L17.0827 7.21629H18.2381V18.882C18.2381 19.6069 17.6486 20.1971 16.9237 20.1971ZM19.5588 2.88167L20.0235 2.41701C20.147 2.2928 20.2161 2.12783 20.2161 1.95236C20.2161 1.77622 20.1477 1.61191 20.0235 1.48836C19.7751 1.23927 19.3439 1.23992 19.0942 1.4877L18.6295 1.95236L19.5588 2.88167Z"
            fill="#3D3F43"
          />
        </svg>
        <a class="footer-slider-list-item-link">
          <span>{{ _t('Add Note') }}</span>
        </a>
      </div>
    </div>
    <!-- <mobile-footer /> -->
  </div>
</template>
<script>
/* global $ */
import { mapState, mapGetters } from 'vuex'
// import mobileFooter from './mobileFooter.vue'

export default {
  name: 'mobileOrdersMenu',
  data() {
    return {
      vbutton: '',
    }
  },
  // components: {
  //   mobileFooter,
  // },
  computed: {
    ...mapGetters(['footerMenuHendler']),
    ...mapGetters('location', ['formatPrice', '_t']),
    ...mapState({
      loyaltyCard: state => state.customer.customerLoyalty.card,
      selectedCustomer: state => state.customer.customer.name,
    }),
    ...mapState({
      selectedModal: state =>
        state.location.setModal == '#loyalty-payment'
          ? '#manage-customer'
          : state.location.setModal,
    }),
    ...mapGetters('auth', ['waiter', 'carhop']),
    ...mapState('order', ['orderType', 'cartType']),
  },
  methods: {
    footerMenuHendlerChange() {
      this.$store.dispatch('footerMenuHendlerChange')
    },
    setOrderType(opt) {
      this.$store.commit('order/ORDER_TYPE', opt)
    },
    openManageCustomer() {
      this.$store.dispatch('openManageCustomer')
    },
    discountHendlerChange() {
      this.$store.dispatch('discountHendlerChange')
    },
    loyaltyHendlerChange() {
      this.$store.dispatch('loyaltyHendlerChange')
    },
    addNoteHendlerChange() {
      this.$store.dispatch('addNoteHendlerChange')
    },
    viewHoldOrders() {
      this.vbutton = 'new'
      this.$store.commit('order/SET_CART_TYPE', 'hold')
      this.$store.dispatch('holdOrders/getHoldOrders')
      this.$store.dispatch('footerMenuHendlerChange')
    },
    add_customer_address() {
      if (this.$store.state.customer.address === false) {
        $('#manage-customer').modal()
      } else {
        $('#order-confirmation').modal()
      }
    },
  },
}
</script>
