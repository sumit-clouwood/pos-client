<template>
  <div
    :class="[
      'profile-sidebar-overlay',
      profileHendler ? 'active' : 'notActive',
    ]"
    @click.self="profileHendlerGhange"
  >
    <div class="profile-sidebar">
      <div class="profile-sidebar-header">
        <avatar />
        <div class="btn-close" @click="profileHendlerGhange">âœ–</div>
        <date-time />
        <div class="separator"></div>
        <online-counter />
      </div>
      <div class="profile-sidebar-body">
        <div class="profile-menu">
          <div class="profile-menu-item active">
            <div class="profile-menu-item-icon">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4 8.99994H17L15.4 10.1999C15.2949 10.2787 15.2064 10.3775 15.1395 10.4905C15.0726 10.6034 15.0286 10.7285 15.0101 10.8585C14.9915 10.9885 14.9987 11.1209 15.0313 11.2481C15.0639 11.3753 15.1212 11.4949 15.2 11.5999C15.2931 11.7241 15.4139 11.8249 15.5528 11.8944C15.6916 11.9638 15.8448 11.9999 16 11.9999C16.2164 11.9999 16.4269 11.9298 16.6 11.7999L20.6 8.79994C20.7223 8.70662 20.8214 8.58634 20.8897 8.44845C20.9579 8.31056 20.9934 8.15879 20.9934 8.00494C20.9934 7.8511 20.9579 7.69933 20.8897 7.56144C20.8214 7.42355 20.7223 7.30327 20.6 7.20994L16.74 4.20994C16.5305 4.04684 16.2647 3.97364 16.0013 4.00646C15.7378 4.03928 15.4981 4.17542 15.335 4.38495C15.1719 4.59447 15.0987 4.8602 15.1315 5.12369C15.1643 5.38718 15.3005 5.62684 15.51 5.78994L17.08 6.99994H4C3.73478 6.99994 3.48043 7.1053 3.29289 7.29284C3.10536 7.48037 3 7.73473 3 7.99994C3 8.26516 3.10536 8.51952 3.29289 8.70705C3.48043 8.89459 3.73478 8.99994 4 8.99994Z"
                  fill="#64C434"
                />
                <path
                  d="M20 16H6.99998L8.59998 14.8C8.81216 14.6409 8.95242 14.404 8.98993 14.1414C9.02744 13.8789 8.95911 13.6122 8.79998 13.4C8.64085 13.1878 8.40395 13.0476 8.1414 13.0101C7.87885 12.9725 7.61216 13.0409 7.39998 13.2L3.39998 16.2C3.27768 16.2933 3.17855 16.4136 3.11032 16.5515C3.04209 16.6894 3.00659 16.8412 3.00659 16.995C3.00659 17.1488 3.04209 17.3006 3.11032 17.4385C3.17855 17.5764 3.27768 17.6967 3.39998 17.79L7.25998 20.79C7.43453 20.9255 7.64903 20.9993 7.86998 21C8.0227 20.9996 8.17331 20.9643 8.31025 20.8967C8.44719 20.8291 8.56682 20.731 8.65998 20.61C8.82237 20.4015 8.89565 20.1373 8.86379 19.8749C8.83194 19.6126 8.69755 19.3735 8.48998 19.21L6.91998 18H20C20.2652 18 20.5196 17.8946 20.7071 17.7071C20.8946 17.5196 21 17.2652 21 17C21 16.7348 20.8946 16.4804 20.7071 16.2929C20.5196 16.1054 20.2652 16 20 16Z"
                  fill="#64C434"
                />
              </svg>
            </div>
            <div class="profile-menu-item-text">Transactions</div>
          </div>
          <div class="profile-menu-item">
            <div class="profile-menu-item-icon">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10ZM8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12Z"
                  fill="#B0B2BB"
                />
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12 2C11.7348 2 11.4804 2.10536 11.2929 2.29289C11.1054 2.48043 11 2.73478 11 3V3.17399C10.9979 3.6908 10.8448 4.19572 10.5594 4.62661C10.2741 5.0575 9.86895 5.39555 9.39393 5.59914C9.30938 5.63538 9.22042 5.65969 9.12961 5.67157C8.69798 5.82272 8.23333 5.85998 7.781 5.77796C7.26 5.68349 6.77925 5.43512 6.40073 5.06486L6.39285 5.05715L6.33289 4.99711C6.24002 4.90413 6.12934 4.82998 6.00794 4.77965C5.88654 4.72933 5.75642 4.70343 5.625 4.70343C5.49358 4.70343 5.36346 4.72933 5.24206 4.77965C5.12066 4.82998 5.01037 4.90374 4.9175 4.99671L4.91671 4.9975C4.82374 5.09037 4.74998 5.20066 4.69965 5.32206C4.64933 5.44346 4.62343 5.57358 4.62343 5.705C4.62343 5.83642 4.64933 5.96654 4.69965 6.08794C4.74998 6.20934 4.82374 6.31963 4.91671 6.4125L4.98491 6.48069C5.35516 6.85921 5.60349 7.34 5.69796 7.861C5.79055 8.37163 5.73113 8.89797 5.52745 9.37478C5.34189 9.86133 5.01698 10.2827 4.59305 10.5859C4.16054 10.8952 3.64498 11.0673 3.11338 11.0797L3.09 11.08H3C2.73478 11.08 2.48043 11.1854 2.29289 11.3729C2.10536 11.5604 2 11.8148 2 12.08C2 12.3452 2.10536 12.5996 2.29289 12.7871C2.48043 12.9746 2.73478 13.08 3 13.08H3.17399C3.6908 13.0821 4.19572 13.2352 4.62661 13.5206C5.05601 13.8049 5.3932 14.2082 5.59701 14.6811C5.80908 15.1643 5.87211 15.6998 5.77796 16.219C5.68349 16.74 5.43512 17.2207 5.06486 17.5993L5.05715 17.6072L4.9971 17.6671C4.90413 17.76 4.82998 17.8707 4.77965 17.9921C4.72933 18.1135 4.70343 18.2436 4.70343 18.375C4.70343 18.5064 4.72933 18.6365 4.77965 18.7579C4.82998 18.8793 4.90374 18.9896 4.99671 19.0825L4.9975 19.0833C5.09037 19.1763 5.20066 19.25 5.32206 19.3003C5.44346 19.3507 5.57359 19.3766 5.705 19.3766C5.83641 19.3766 5.96654 19.3507 6.08794 19.3003C6.20934 19.25 6.31963 19.1763 6.4125 19.0833L6.48069 19.0151C6.85921 18.6448 7.34 18.3965 7.861 18.302C8.37163 18.2095 8.89796 18.2689 9.37477 18.4725C9.86132 18.6581 10.2827 18.983 10.5859 19.407C10.8952 19.8395 11.0673 20.355 11.0797 20.8866L11.08 20.91V21C11.08 21.2652 11.1854 21.5196 11.3729 21.7071C11.5604 21.8946 11.8148 22 12.08 22C12.3452 22 12.5996 21.8946 12.7871 21.7071C12.9746 21.5196 13.08 21.2652 13.08 21V20.83L13.08 20.826C13.0821 20.3092 13.2352 19.8043 13.5206 19.3734C13.805 18.944 14.2083 18.6067 14.6812 18.4029C15.1643 18.1909 15.6998 18.1279 16.219 18.222C16.74 18.3165 17.2207 18.5649 17.5993 18.9351L17.6071 18.9429L17.6671 19.0029C17.76 19.0959 17.8707 19.17 17.9921 19.2203C18.1135 19.2707 18.2436 19.2966 18.375 19.2966C18.5064 19.2966 18.6365 19.2707 18.7579 19.2203C18.8793 19.17 18.9896 19.0963 19.0825 19.0033L19.0833 19.0025C19.1763 18.9096 19.25 18.7993 19.3003 18.6779C19.3507 18.5565 19.3766 18.4264 19.3766 18.295C19.3766 18.1636 19.3507 18.0335 19.3003 17.9121C19.25 17.7907 19.1763 17.6804 19.0833 17.5875L19.0151 17.5193C18.6448 17.1408 18.3965 16.66 18.302 16.139C18.2079 15.6198 18.2709 15.0843 18.4829 14.6012C18.6867 14.1283 19.024 13.725 19.4534 13.4406C19.8843 13.1552 20.3892 13.0021 20.906 13L20.91 13L21 13C21.2652 13 21.5196 12.8946 21.7071 12.7071C21.8946 12.5196 22 12.2652 22 12C22 11.7348 21.8946 11.4804 21.7071 11.2929C21.5196 11.1054 21.2652 11 21 11H20.83L20.826 11C20.3092 10.9979 19.8043 10.8448 19.3734 10.5594C18.9425 10.2741 18.6045 9.86896 18.4009 9.39393C18.3646 9.30938 18.3403 9.22042 18.3284 9.12961C18.1773 8.69798 18.14 8.23332 18.222 7.781C18.3165 7.26 18.5649 6.77925 18.9351 6.40073L18.9428 6.39285L19.0029 6.3329C19.0959 6.24002 19.17 6.12934 19.2203 6.00794C19.2707 5.88654 19.2966 5.75641 19.2966 5.625C19.2966 5.49359 19.2707 5.36346 19.2203 5.24206C19.17 5.12066 19.0963 5.01037 19.0033 4.9175L19.0025 4.91671C18.9096 4.82374 18.7993 4.74998 18.6779 4.69965C18.5565 4.64933 18.4264 4.62343 18.295 4.62343C18.1636 4.62343 18.0335 4.64933 17.9121 4.69965C17.7907 4.74998 17.6804 4.82374 17.5875 4.91671L17.5193 4.98491C17.1408 5.35516 16.66 5.60349 16.139 5.69796C15.6198 5.79211 15.0843 5.72908 14.6011 5.51701C14.1282 5.3132 13.7249 4.97601 13.4406 4.54661C13.1552 4.11572 13.0021 3.6108 13 3.09399L13 3.09V3C13 2.73478 12.8946 2.48043 12.7071 2.29289C12.5196 2.10536 12.2652 2 12 2ZM19.4 15L20.3149 15.4038C20.2624 15.5226 20.2468 15.6544 20.27 15.7822C20.2929 15.9086 20.3527 16.0253 20.4419 16.1177L20.4967 16.1725C20.4966 16.1724 20.4968 16.1726 20.4967 16.1725C20.7755 16.451 20.997 16.7822 21.1479 17.1462C21.2989 17.5104 21.3766 17.9008 21.3766 18.295C21.3766 18.6892 21.2989 19.0796 21.1479 19.4438C20.9969 19.808 20.7756 20.1389 20.4967 20.4175L19.79 19.71L20.4975 20.4167C20.2189 20.6956 19.888 20.9169 19.5238 21.0679C19.1596 21.2189 18.7692 21.2966 18.375 21.2966C17.9808 21.2966 17.5904 21.2189 17.2262 21.0679C16.8622 20.917 16.5314 20.6959 16.2529 20.4171C16.253 20.4172 16.2528 20.417 16.2529 20.4171L16.1977 20.3619C16.1053 20.2727 15.9886 20.2129 15.8622 20.19C15.7344 20.1668 15.6026 20.1824 15.4838 20.2349L15.474 20.2392C15.3574 20.2891 15.258 20.372 15.1881 20.4777C15.1183 20.583 15.0808 20.7063 15.08 20.8325V21C15.08 21.7957 14.7639 22.5587 14.2013 23.1213C13.6387 23.6839 12.8757 24 12.08 24C11.2843 24 10.5213 23.6839 9.95868 23.1213C9.39607 22.5587 9.08 21.7957 9.08 21V20.9244C9.07526 20.7972 9.03327 20.6741 8.95914 20.5704C8.88326 20.4644 8.77723 20.3836 8.65482 20.3385C8.63505 20.3313 8.61551 20.3234 8.59624 20.3149C8.47742 20.2624 8.34561 20.2468 8.21782 20.27C8.09142 20.2929 7.97467 20.3527 7.8823 20.4419L7.8275 20.4967C7.82763 20.4966 7.82737 20.4968 7.8275 20.4967C7.54896 20.7755 7.21784 20.997 6.85382 21.1479C6.48963 21.2989 6.09925 21.3766 5.705 21.3766C5.31075 21.3766 4.92037 21.2989 4.55618 21.1479C4.19233 20.9971 3.86174 20.7761 3.58329 20.4975C3.30436 20.2189 3.08308 19.888 2.93211 19.5238C2.78113 19.1596 2.70343 18.7692 2.70343 18.375C2.70343 17.9808 2.78113 17.5904 2.93211 17.2262C3.08308 16.862 3.30436 16.5311 3.58329 16.2525L3.63811 16.1977C3.72728 16.1053 3.78713 15.9886 3.81005 15.8622C3.83322 15.7344 3.81758 15.6026 3.76514 15.4838L3.76081 15.474C3.71087 15.3574 3.62801 15.258 3.52232 15.1881C3.41704 15.1183 3.29374 15.0808 3.1675 15.08H3C2.20435 15.08 1.44129 14.7639 0.87868 14.2013C0.316071 13.6387 0 12.8756 0 12.08C0 11.2844 0.316071 10.5213 0.87868 9.95868C1.44129 9.39607 2.20435 9.08 3 9.08H3.07564C3.20283 9.07526 3.32591 9.03327 3.42955 8.95914C3.53564 8.88326 3.61644 8.77723 3.66146 8.65482C3.66874 8.63505 3.67663 8.61551 3.68514 8.59624C3.73758 8.47742 3.75322 8.34561 3.73005 8.21782C3.70713 8.09142 3.64728 7.97468 3.5581 7.88231L3.50329 7.8275C3.22436 7.54888 3.00308 7.21802 2.85211 6.85382C2.70113 6.48963 2.62343 6.09925 2.62343 5.705C2.62343 5.31075 2.70113 4.92037 2.85211 4.55618C3.00301 4.19216 3.22415 3.86143 3.50289 3.58289C3.78143 3.30415 4.11216 3.08301 4.47618 2.93211C4.84037 2.78113 5.23075 2.70343 5.625 2.70343C6.01925 2.70343 6.40963 2.78113 6.77382 2.93211C7.13802 3.08308 7.46888 3.30436 7.7475 3.58329L7.80231 3.6381C7.89468 3.72728 8.01142 3.78713 8.13782 3.81005C8.26561 3.83322 8.39742 3.81758 8.51624 3.76514C8.58027 3.73687 8.64693 3.71549 8.71507 3.70122C8.78479 3.6539 8.84498 3.59323 8.89195 3.52232C8.96167 3.41704 8.99921 3.29374 9 3.1675V3C9 2.20435 9.31607 1.44129 9.87868 0.87868C10.4413 0.316071 11.2044 0 12 0C12.7956 0 13.5587 0.316071 14.1213 0.87868C14.6839 1.44129 15 2.20435 15 3V3.0875C15.0008 3.21374 15.0383 3.33704 15.1081 3.44232C15.178 3.54801 15.2774 3.63092 15.3939 3.68086L15.4038 3.68508C15.5226 3.73752 15.6544 3.75322 15.7822 3.73005C15.9086 3.70713 16.0253 3.64728 16.1177 3.55811L16.1725 3.50329C16.4511 3.22436 16.782 3.00308 17.1462 2.85211C17.5104 2.70113 17.9008 2.62343 18.295 2.62343C18.6892 2.62343 19.0796 2.70113 19.4438 2.85211C19.808 3.00308 20.1389 3.22436 20.4175 3.50329C20.6961 3.78174 20.9171 4.11233 21.0679 4.47618C21.2189 4.84037 21.2966 5.23075 21.2966 5.625C21.2966 6.01925 21.2189 6.40963 21.0679 6.77382C20.917 7.13784 20.6959 7.46857 20.4171 7.7471C20.4172 7.74697 20.417 7.74724 20.4171 7.7471L20.3619 7.80231C20.2727 7.89468 20.2129 8.01142 20.19 8.13782C20.1668 8.26561 20.1824 8.39742 20.2349 8.51624C20.2631 8.58027 20.2845 8.64692 20.2988 8.71507C20.3461 8.78479 20.4068 8.84498 20.4777 8.89195C20.583 8.96167 20.7063 8.99921 20.8325 9H21C21.7957 9 22.5587 9.31607 23.1213 9.87868C23.6839 10.4413 24 11.2043 24 12C24 12.7957 23.6839 13.5587 23.1213 14.1213C22.5587 14.6839 21.7957 15 21 15H20.9125C20.7863 15.0008 20.663 15.0383 20.5577 15.1081C20.452 15.178 20.3691 15.2774 20.3191 15.3939L19.4 15Z"
                  fill="#B0B2BB"
                />
              </svg>
            </div>
            <div class="profile-menu-item-text">Settings</div>
          </div>
          <div class="profile-menu-item">
            <div class="profile-menu-item-icon">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M20 9.99999H19.995C19.846 5.68799 16.427 2.12899 12.245 2.00399C10.065 1.93599 7.995 2.73899 6.43 4.25799C4.862 5.77799 4 7.81699 4 9.99999C2.897 9.99999 2 10.897 2 12V16C2 17.103 2.897 18 4 18H5C5.553 18 6 17.552 6 17V9.99999C6 8.36299 6.647 6.83399 7.822 5.69299C8.996 4.55299 10.577 3.94599 12.184 4.00299C15.392 4.09899 18 6.92099 18 10.293V16V17V18C18 19.103 17.103 20 16 20H14C14 19.448 13.553 19 13 19H11C10.447 19 10 19.448 10 20V21C10 21.552 10.447 22 11 22H12H13H16C18.206 22 20 20.206 20 18C21.103 18 22 17.103 22 16V12C22 10.897 21.103 9.99999 20 9.99999Z"
                  fill="#B0B2BB"
                />
              </svg>
            </div>
            <div class="profile-menu-item-text">Support</div>
          </div>
        </div>
      </div>
      <div class="profile-sidebar-footer">
        <div class="logout" @click="mlogout">
          <svg
            width="15"
            height="18"
            viewBox="0 0 15 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M10.5859 7.828H4.94393C4.8126 7.828 4.68257 7.85387 4.56124 7.90412C4.43992 7.95438 4.32968 8.02804 4.23682 8.12089C4.14396 8.21375 4.0703 8.32399 4.02005 8.44532C3.96979 8.56664 3.94393 8.69668 3.94393 8.828C3.94393 8.95932 3.96979 9.08936 4.02005 9.21068C4.0703 9.33201 4.14396 9.44225 4.23682 9.53511C4.32968 9.62796 4.43992 9.70162 4.56124 9.75188C4.68257 9.80213 4.8126 9.828 4.94393 9.828H10.5859L9.46393 10.95C9.27642 11.1376 9.17113 11.3921 9.17122 11.6574C9.17132 11.9226 9.27679 12.177 9.46443 12.3645C9.65207 12.552 9.90651 12.6573 10.1718 12.6572C10.4371 12.6571 10.6914 12.5516 10.8789 12.364L13.7069 9.536C13.8003 9.44333 13.8743 9.33311 13.9249 9.21168C13.9754 9.09025 14.0015 8.96003 14.0015 8.8285C14.0015 8.69697 13.9754 8.56674 13.9249 8.44532C13.8743 8.32389 13.8003 8.21367 13.7069 8.121L10.8799 5.293C10.6924 5.10536 10.4381 4.99989 10.1728 4.9998C9.90751 4.9997 9.65307 5.10499 9.46543 5.2925C9.27779 5.48001 9.17232 5.73438 9.17222 5.99965C9.17213 6.26492 9.27742 6.51936 9.46493 6.707L10.5859 7.828ZM0.999927 0C0.73471 0 0.480356 0.105357 0.29282 0.292893C0.105284 0.48043 -7.34329e-05 0.734784 -7.34329e-05 1V17C-7.34329e-05 17.2652 0.105284 17.5196 0.29282 17.7071C0.480356 17.8946 0.73471 18 0.999927 18C1.26514 18 1.5195 17.8946 1.70703 17.7071C1.89457 17.5196 1.99993 17.2652 1.99993 17V1C1.99993 0.734784 1.89457 0.48043 1.70703 0.292893C1.5195 0.105357 1.26514 0 0.999927 0V0Z"
              fill="#CC3232"
            />
          </svg>
          Logout
        </div>
      </div>
    </div>
  </div>
</template>
<script>
import { mapGetters, mapActions } from 'vuex'
import avatar from './mobileElements/avatar.vue'
import dateTime from './mobileElements/dateTime.vue'
import onlineCounter from './mobileElements/onlineCounter.vue'

export default {
  components: {
    avatar,
    dateTime,
    onlineCounter,
  },
  computed: {
    ...mapGetters(['profileHendler']),
    ...mapActions('auth', ['logout']),
  },
  methods: {
    profileHendlerGhange() {
      this.$store.dispatch('profileHendlerGhange')
    },
    mlogout() {
      this.$store.dispatch('mobileLogout')
      this.$store.dispatch('userCalcHendlerGhange')
      this.$store.dispatch('openUserHendlerGhange')
      this.$store.dispatch('profileHendlerGhange')
      this.logout()
    },
  },
}
</script>
<style lang="scss">
@import '../../assets/scss/pixels_rem.scss';
@import '../../assets/scss/variables.scss';
@import '../../assets/scss/mixins.scss';

.profile-sidebar-overlay {
  z-index: 10;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.3);
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  transition: 0.7s ease-out;

  &.active {
    display: block;

    .profile-sidebar {
      transition: 0.7s ease-out;
      right: 0;
    }
  }

  &.notActive {
    display: block;
    background-color: rgba(0, 0, 0, 0);
    pointer-events: none;

    .profile-sidebar {
      transition: 0.7s ease-out;
      right: -85%;
    }
  }

  .profile-sidebar {
    transition: 0.7s ease-out;
    z-index: 11;
    width: 85%;
    background-color: #fff;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    display: grid;
    grid-template-rows: min-content 1fr min-content;

    .profile-sidebar-header {
      display: grid;
      grid-template-columns: max-content auto max-content;
      align-items: center;
      justify-content: space-between;
      grid-row-gap: 20px;
      padding: 35px 20px;

      .btn-close {
        font-size: 18px;
        justify-self: end;
        margin-right: 5px;
      }

      .separator {
        width: 1px;
        height: 100%;
        background-color: #fff;
      }
    }

    .profile-sidebar-body {
      border-top: 1px solid #e3e7f2;
      border-bottom: 1px solid #e3e7f2;
      padding: 0 20px;

      .profile-menu {
        .profile-menu-item {
          display: grid;
          grid-template-columns: max-content 1fr;
          grid-gap: 20px;
          align-items: center;
          height: 65px;
          color: #b0b2bb;

          &.active {
            color: #64c434;
          }

          .profile-menu-item-icon {
            display: flex;
            align-items: center;
          }

          .profile-menu-item-text {
            height: 100%;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #e3e7f2;
          }

          &:last-child {
            .profile-menu-item-text {
              border: none;
            }
          }
        }
      }
    }

    .profile-sidebar-footer {
      display: flex;
      padding: 20px;
      height: 75px;

      .logout {
        display: grid;
        grid-template-columns: max-content max-content;
        align-items: center;
        grid-gap: 20px;
        color: #cc3232;
        font-weight: 600;
        font-size: 14px;
      }
    }
  }
}
</style>
